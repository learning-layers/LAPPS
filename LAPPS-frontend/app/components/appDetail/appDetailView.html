<div class="row">

  <button ng-click="expandCollapseDescription()" ng-class="{'collapsed': collapsed}" class="visible-xs description-expander btn btn-primary">
    <span class="caret" ng-class="{'caret-reversed-white': !collapsed}"></span><span class="hspacer05"></span>{{collapsed?'Show more':'Show less'}}<span class="hspacer05"></span><span class="caret" ng-class="{'caret-reversed-white': !collapsed}"></span>
  </button>
  <div class="col-md-12">
    <div class="col-md-12 thumbnail" id="app-description">
      <div class="title">
        <h2>
          <i class="{{app.platformObj.icon}} pull-left"></i>
          {{app.name}} <span>
            by <a href="#/users/{{app.creator.oidcId}}">{{app.creator.username}}</a>
          </span>
          <a href="#/apps/{{app.id}}/edit" id="editApp" class="btn btn-warning pull-right"><span class="glyphicon glyphicon-pencil"></span><span class="hspacer05"></span>Edit</a>
        </h2>
        
      </div>
      <!--<div id="platform-links">
          <input type="image" src="./assets/img/android.png" id="android" data-ng-click="chosenVersion($event)" />
          <input type="image" src="./assets/img/windows.png" id="windows" data-ng-click="chosenVersion($event)" />
          <input type="image" src="./assets/img/apple.png" id="ios" data-ng-click="chosenVersion($event)" />
        </div>-->
      <div class="app-detail-container">

        <img ng-src="{{app.thumbnail}}" class="img-detail">
        <div class="caption">
          <a href="{{app.downloadUrl}}" id="download-button" class="{{app.platformObj.downloadBadge}}"></a>
          <div class="app-meta-data  text-color-paleblack">
            <div id="app-rating">
              <star-rating value="{{app.rating}}"></star-rating><span class="hspacer05"></span>
            </div>
            <div id="app-tags">
              <tags value="{{app.tags}}"></tags>
            </div>
          </div>
          <div class="vspacer05"></div>
          <p class="short-description">{{app.shortDescription}}</p>
          <p class="text-center more-text-indicator" ng-show="collapsed">
            <span class="dotdotdot"></span><span class="dotdotdot"></span><span class="dotdotdot"></span>
          </p>

          <p class="long-description" ng-class="{'collapsed': collapsed}" ng-bind-html="app.longDescriptionMarkdown | unsafe"></p>
          <button ng-click="expandCollapseDescription()" class=" description-expander btn btn-primary">
            <span class="caret" ng-class="{'caret-reversed-white': !collapsed}"></span><span class="hspacer05"></span>{{collapsed?'Show more':'Show less'}}<span class="hspacer05"></span><span class="caret" ng-class="{'caret-reversed-white': !collapsed}"></span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-12">

    <div class="col-md-9" id="app-images">
      <div id="featured-carousel" class="thumbnail">
        <carousel interval="interval" on-carousel-change="onSlideChanged(nextSlide, direction)" ng-click="stopCarousel()">
          <slide ng-repeat="video in app.videos">
            <div class="videoWrapper">
              <iframe width="560" height="315" ng-src="{{video.url}}" frameborder="0" allowfullscreen onload="iFrameVideoLoaded();"></iframe>
            </div>
          </slide>
          <slide ng-repeat=" image in app.images">
            <img ng-src="{{image.url}}" width="1000" height="560">
          </slide>
        </carousel>
        
        <p>{{(currentSlide< app.videos.length)?app.videos[currentSlide].description:app.images[currentSlide-app.videos.length].description}}</p>
      </div>
    </div>

    <div class=" thumbnail col-md-3" id="app-technical-detail">
      <div class="title">
        <h3>Technical details</h3>
      </div>

      <dl>
        <dt>
          <dfn><i class="fa fa-puzzle-piece"></i><span class="hspacer05"></span>Platform</dfn>
        </dt>
        <dd>{{app.platformObj.name}}</dd>
        <dt>
          <dfn><i class="fa fa-cogs"></i><span class="hspacer05"></span>Supported Platform Versions</dfn>
        </dt>
        <dd>{{app.minPlatformRequired}}</dd>
        <dt>
          <dfn><i class="fa fa-plus-square"></i><span class="hspacer05"></span>Also available on</dfn>
        </dt>

        <dd ng-repeat="alternative in alternativePlatforms"><a href="#/apps/{{alternative.id}}">{{alternative.platform}}</a></dd>

        <div ng-if="app.sourceUrl">
          <dt>
            <dfn><i class="fa fa-code-fork"></i><span class="hspacer05"></span>Source Code</dfn>
          </dt>
          <dd>
            <a href="{{app.sourceUrl}}">{{app.sourceUrlShort}}</a>
          </dd>
        </div>
        <dt>
          <dfn><i class="fa fa-level-up"></i><span class="hspacer05"></span>Version</dfn>
        </dt>
        <dd>{{app.version}}</dd>
        <div ng-if="app.size">
          <dt>
            <dfn><i class="fa fa-arrows-h"></i><span class="hspacer05"></span>Size</dfn>
          </dt>
          <dd>{{size}}</dd>
        </div>
        <dt>
          <dfn><i class="fa fa-calendar-o"></i><span class="hspacer05"></span>Release</dfn>
        </dt>
        <dd>{{dateCreated}}</dd>

        <dt>
          <dfn><i class="fa fa-calendar"></i><span class="hspacer05"></span>Last Update</dfn>
        </dt>
        <dd>{{dateModified}}</dd>
        <dt>
          <dfn><i class="fa fa-copyright"></i><span class="hspacer05"></span>License</dfn>
        </dt>
        <dd>{{app.license}}</dd>
        <dt>
          <dfn><i class="fa fa-life-ring"></i><span class="hspacer05"></span>Support Page</dfn>
        </dt>
        <dd>
          <a href="{{app.supportUrl}}">{{app.supportUrlShort}}</a>
        </dd>
      </dl>
    </div>
  </div>
</div>